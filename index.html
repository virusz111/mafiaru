<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>MafiaRussian</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background: url('background.png') no-repeat center center fixed;
    background-size: cover;
    color:#eee;
}
/* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
#login{
    position:fixed;
    inset:0;
    background:#0a0a0a;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:9999;
    transition:opacity .6s;
}
.login-box{
    background:#140022;
    border:1px solid #7a2cff;
    border-radius:20px;
    padding:30px;
    width:280px;
    text-align:center;
    box-shadow:0 0 25px #3a0070;
}
.login-box input{
    width:100%;
    margin:8px 0;
    padding:10px;
    border-radius:12px;
    border:none;
    outline:none;
}
.login-box button{
    margin-top:12px;
    padding:12px;
    width:100%;
    border:none;
    border-radius:15px;
    background:#7a2cff;
    color:#fff;
    cursor:pointer;
}
#error{
    color:#ff5c5c;
    display:none;
    margin-top:8px;
}
/* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
header{
    display:none;
    position:fixed;
    top:20px;
    right:20px;
    z-index:999;
}
header button{
    background:#7a2cff;
    color:#fff;
    border:none;
    font-size:1.8em;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
}
/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
#menu{
    display:none;
    position:fixed;
    top:80px;
    right:20px;
    background:#12001f;
    padding:12px;
    border-radius:15px;
    box-shadow:0 0 20px #3a0070;
    z-index:998;
}
#menu button{
    display:block;
    width:100%;
    margin:6px 0;
    padding:10px;
    border:none;
    border-radius:12px;
    background:#7a2cff;
    color:#fff;
}
/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
#content{
    display:none;
    padding:100px 15px 20px;
}
.cards{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:15px;
}
.card{
    background:linear-gradient(135deg,rgba(122,44,255,.35),rgba(20,0,34,.8));
    border:1px solid #7a2cff;
    border-radius:18px;
    padding:20px;
    text-align:center;
    display:none;
    position:relative;
}
.big{
    grid-column:1/-1;
}
.welcome{
    background:linear-gradient(135deg,rgba(122,44,255,.35),rgba(20,0,34,.8));
    text-shadow:0 0 10px rgba(122,44,255,.8);
}
.welcome-title{
    font-size:1.6em;
    margin-bottom:10px;
    letter-spacing:1px;
}
.welcome-name{
    color:#caa6ff;
    font-weight:bold;
}
.welcome-motto{
    margin-top:12px;
    font-size:1.1em;
    opacity:.9;
    letter-spacing:1px;
}
/* Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„ØµÙˆØ± */
.post-img{
    max-width:100%;
    margin-top:8px;
    border-radius:10px;
}
/* Ø£Ø²Ø±Ø§Ø± ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù */
.post-btn{
    position:absolute;
    top:10px;
    right:10px;
    background:#7a2cff;
    color:#fff;
    border:none;
    padding:4px 8px;
    margin-left:4px;
    cursor:pointer;
    border-radius:5px;
    font-size:0.8em;
}
.notifications{
    position:fixed;
    bottom:20px;
    left:20px;
    background:#7a2cff;
    color:#fff;
    padding:10px 15px;
    border-radius:10px;
    box-shadow:0 0 10px #3a0070;
    display:none;
    z-index:9999;
}
#muteBtn{
    position:fixed;
    top:20px;
    left:20px;
    background:#7a2cff;
    color:#fff;
    border:none;
    padding:10px;
    border-radius:10px;
    cursor:pointer;
}
</style>
</head>
<body>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="login">
    <div class="login-box">
        <h2>â˜  ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <input id="username" placeholder="Ø§Ù„Ø§Ø³Ù…">
        <input id="password" type="password" placeholder="Ø§Ù„Ø±Ù…Ø²">
        <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
        <div id="error">Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù…Ø² Ø®Ø·Ø£</div>
    </div>
</div>

<!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
<header id="header">
    <button onclick="toggleMenu()">â‰¡</button>
</header>

<!-- Ø²Ø± ÙƒØªÙ… Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->
<button id="muteBtn" onclick="toggleMute()">ğŸ”‡</button>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
<div id="menu">
    <button onclick="showSection('welcome')">â˜  Ø§Ù„ØªØ±Ø­ÙŠØ¨</button>
    <button onclick="showSection('laws')">â˜  Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</button>
    <button onclick="showSection('weapons')">â˜  Ø§Ù„Ø£Ø³Ù„Ø­Ø©</button>
    <button onclick="showSection('leaders')">â˜  Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† Ùˆ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</button>
    <button onclick="showSection('gangs')">â˜  Ø§Ù„Ø¹ØµØ§Ø¨Ø§Øª</button>
    <button onclick="showSection('house')">â˜  Ø§Ù„Ø¨ÙŠÙˆØª</button>
    <button onclick="showSection('house-gun')">â˜  houses guns</button>
    <button id="chatBtn" onclick="showSection('chat')">ğŸ’¬ Ø¯Ø±Ø¯Ø´Ø©</button>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
<div id="content">
<div class="cards" id="cardsContainer">

<!-- Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
<div class="card big welcome" data-type="welcome">
    <div class="welcome-title">
        â˜  Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ <span class="welcome-name" id="userDisplay">Ø¹Ø¶Ùˆ</span>
    </div>
    <div>
        ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ù…Ø§ÙÙŠØ§ Ø§Ù„Ø±ÙˆØ³ÙŠØ©
    </div>
    <div class="welcome-motto">
        â˜  Ø§Ù„ÙˆÙ„Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ù… â˜ <br>
        Ù…Ù† ÙŠØ®ÙˆÙ† ÙŠÙÙ…Ø­Ù‰â€¦ ÙˆÙ…Ù† ÙŠØ®Ù„Øµ ÙŠÙØ±ÙØ¹
    </div>
</div>

</div>
</div>

<!-- Ø¯Ø±Ø¯Ø´Ø© -->
<div id="chatContainer" style="display:none; padding:80px 15px;">
    <h3>ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</h3>
    <div id="chatMessages" style="margin-bottom:10px;"></div>
    <input id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." style="width:70%; padding:8px; border-radius:6px; border:none; outline:none;">
    <input type="file" id="chatImage" style="width:20%; padding:8px;">
    <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
<div class="notifications" id="notif"></div>

<!-- Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->
<audio id="bgMusic" loop>
    <source src="mafia1.mp3" type="audio/mpeg">
</audio>

<script>
// Ø¹Ù†Ø§ØµØ± DOM
const username = document.getElementById("username");
const password = document.getElementById("password");
const error = document.getElementById("error");
const loginDiv = document.getElementById("login");
const content = document.getElementById("content");
const header = document.getElementById("header");
const userDisplay = document.getElementById("userDisplay");
const menu = document.getElementById("menu");
const notif = document.getElementById("notif");
const chatContainer = document.getElementById("chatContainer");
const chatMessages = document.getElementById("chatMessages");
const chatInput = document.getElementById("chatInput");
const chatImage = document.getElementById("chatImage");
const muteBtn = document.getElementById("muteBtn");
const music = document.getElementById("bgMusic");

let currentUser = null;
let isMuted = false;

// Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
const ACCOUNTS = [
    {user:"b", pass:"b", admin:true},
    {user:"Ø§ÙŠÙØ§Ù†", pass:"8989", admin:true},
    {user:"BA95", pass:"ba95", admin:false},
    {user:"Ø¯ÙŠÙ…ØªØ±ÙŠ", pass:"more11", admin:false}
];

// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
const defaultData = {
    weapons: ["AK-47","Deagle","C4","Glock 20"],
    gangs: ["Ø³ÙƒØ±Ø§Ø¨"],
    house: ["Soon..."],
    "house-gun": ["Soon..."],
    chat: []
};

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† LocalStorage
let DATA = JSON.parse(localStorage.getItem("mafiaData")) || defaultData;

// Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function saveData(){
    localStorage.setItem("mafiaData", JSON.stringify(DATA));
}

// Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
function showNotif(msg){
    notif.innerText = msg;
    notif.style.display="block";
    setTimeout(()=>notif.style.display="none",2000);
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function login(){
    const u = username.value.trim();
    const p = password.value.trim();
    const acc = ACCOUNTS.find(a=>a.user===u && a.pass===p);
    if(!acc){ error.style.display="block"; return; }
    currentUser = acc;
    music.volume = 0.4;
    if(!isMuted) music.play();
    loginDiv.style.display="none";
    content.style.display="block";
    header.style.display="block";
    userDisplay.innerText = acc.user;
    renderAll();
    showSection('welcome');
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
function toggleMenu(){
    menu.style.display = menu.style.display==="block"?"none":"block";
}

// ÙƒØªÙ… Ø§Ù„ØµÙˆØª
function toggleMute(){
    isMuted = !isMuted;
    if(isMuted) music.pause();
    else music.play();
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù…
function showSection(type){
    document.querySelectorAll(".card").forEach(c=>{
        c.style.display="none";
    });
    chatContainer.style.display = type==="chat"? "block":"none";

    if(type!=="chat"){
        const container = document.getElementById("cardsContainer");
        container.innerHTML = "";
        DATA[type]?.forEach((item,i)=>{
            if(!item.hidden || (item.hidden && currentUser.admin)){
                const card = document.createElement("div");
                card.className = "card";
                card.dataset.type = type;
                card.innerHTML = `<span>${item.text||item}</span>`;
                if(item.img) card.innerHTML += `<img src="${item.img}" class="post-img">`;
                if(currentUser.admin){
                    const editBtn = document.createElement("button");
                    editBtn.className="post-btn";
                    editBtn.innerText="ØªØ¹Ø¯ÙŠÙ„";
                    editBtn.onclick = ()=>editItem(type,i);
                    card.appendChild(editBtn);
                }
                container.appendChild(card);
            }
        });
    }
}

// Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ØµØ±
function editItem(type,index){
    const item = DATA[type][index];
    const newText = prompt("Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù†Øµ:", item.text||item);
    if(newText===null) return;
    DATA[type][index].text = newText;
    saveData();
    renderAll();
    showNotif("ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„");
}

// Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¯Ø±Ø¯Ø´Ø©
function sendMessage(){
    const text = chatInput.value.trim();
    const file = chatImage.files[0];
    let reader = null;
    if(!text && !file){ alert("Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø§Ø®ØªØ± ØµÙˆØ±Ø©"); return; }
    let msg = {user:currentUser.user, admin:currentUser.admin, text:"", img:""};
    msg.text = text;
    if(file){
        reader = new FileReader();
        reader.onload = ()=> {
            msg.img = reader.result;
            DATA.chat.push(msg);
            saveData();
            renderChat();
            chatInput.value="";
            chatImage.value="";
            showNotif("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
        }
        reader.readAsDataURL(file);
    } else {
        DATA.chat.push(msg);
        saveData();
        renderChat();
        chatInput.value="";
        chatImage.value="";
        showNotif("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    }
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
function renderChat(){
    chatMessages.innerHTML="";
    DATA.chat.forEach((m,i)=>{
        const div = document.createElement("div");
        div.style.border="1px solid #7a2cff";
        div.style.borderRadius="10px";
        div.style.margin="5px 0";
        div.style.padding="5px";
        div.innerHTML = `<b>${m.user}${m.admin?" (Ø£Ø¯Ù…Ù†)":""}:</b> ${m.text}`;
        if(m.img) div.innerHTML += `<br><img src="${m.img}" class="post-img">`;
        if(currentUser.admin || m.user===currentUser.user){
            const delBtn = document.createElement("button");
            delBtn.className="post-btn";
            delBtn.innerText="Ø­Ø°Ù";
            delBtn.onclick=()=>{DATA.chat.splice(i,1); saveData(); renderChat(); showNotif("ØªÙ… Ø§Ù„Ø­Ø°Ù");};
            div.appendChild(delBtn);
        }
        chatMessages.appendChild(div);
    });
}

// Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
function renderAll(){
    ["weapons","gangs","house","house-gun"].forEach(t=>{
        if(!DATA[t]) DATA[t]=[];
    });
    renderChat();
}
</script>

</body>
</html>
